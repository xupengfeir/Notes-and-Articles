# 永磁同步电机电流环解耦控制策略

## 1、永磁同步电机在dq轴坐标系下的数学模型

PMSM在dq坐标系下的数学模型如下所示：

![20240124215948](https://cdn.jsdelivr.net/gh/xupengfeir/Notes-and-Articles/Image/20240124215948.png)

上面式子由三部分组成：**（1）定子电阻压降；（2）定子磁链产生的电动势；（3）转子转动感应出来的反电动势**。

数学模型转换为图1来表示，可以看出PMSM同步电机d轴电压和q轴电压存在耦合关系，Uq和Ud无法实现独立同步控制。由公式可以看出电机转速越大，耦合项越大，对电机的控制器性能的影响就越大。

![20240124220051](https://cdn.jsdelivr.net/gh/xupengfeir/Notes-and-Articles/Image/20240124220051.png)

## 2、解耦的策略

### 2.1 id=0的控制

矢量控制 $i_d=0$ 控制的本质是实现dq轴的电流静态解耦。d轴的阻尼绕组会产生磁通的，与永磁体的磁通共同构成电机的磁场。 $i_d$ 变换的同时，总的磁通变化，这是一层耦合。

$i_d=0$时，磁通完全由永磁体来提供。直轴的电流为0，直轴不贡献转矩。电机的所与电流全部用来产生电磁转矩，等效于他励直流电机，只用控制 $i_q$ 的值就可以控制电机转矩，降低了铜耗。此时电机的电压方程：

$$u_d=-w_eL_qi_q$$

$$u_q=Ri_q+L_q\frac{di_q}{dt}+w_e\psi_f$$

$$T_e=\frac{3}{2}n_{npp}i_q\psi_f$$

### 2.2 电流前馈解耦对解耦的贡献

PMSM耦合的影响可以通过前馈补偿的方式抵消掉，在d轴控制器和q轴控制器的输出端，分别引入与永磁同步电机dq轴电压方程中耦合项相等的信号作为耦合项，即可实现电流控制器的解耦控制。也称为电压前馈解耦。

![Alt text](image-2.png)![20240124220444](https://cdn.jsdelivr.net/gh/xupengfeir/Notes-and-Articles/Image/20240124220444.png)


反应到公式上表示出来就是如下式所示，图中G(s)为电流环PI控制器。

$$u_d=u^*_d-w_eL_qi_q$$

$$u_q=u^*_q+w_e(L_di_d+\psi_f)$$

3、两种解耦策略的优劣分析

解耦后iq比解耦前的响应速度要快，且平稳度要更好，这将意味着电磁转矩也更加稳定，所以电机的阶跃响应的速度提升。

电机启动阶段，id的复制明显得到了反馈的校正，幅值明显比解耦前要小，尤其在高速阶段。

**总结：永磁同步电机在运行过程中，交直轴电压之间存在耦合现象，即d轴的参数变化会引起q轴的参数变化，这将不利于控制。电流前馈解耦就是从点击模型出发，使电压在经过PI控制器整定之后的输出，得到一个跟耦合量相同的前馈补偿，补偿将耦合项抵消，从而实现解耦。**

从实验效果来看，解耦后的电机阶跃响应的速度更快，且电流的波形更加稳定，有利于提升整个系统的性能。